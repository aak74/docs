# Как DevOps практики меняют документацию

## Как было

### Небольшой проект
Никакой документации нет. Есть только ТЗ. Изменения присутствуют в различных мессенджерах.

Найти информацию практически невозможно. Знания о проекте есть только у менеджера проекта и текущего разработчика. Большой объем знаний был только в одной из голов.
Обмен знаниями никак не налажен. Замена менеджера проекта или разработчика вели к существенной потере знаний о проекте.
Привлечение нового разработчика в проект очень дорого.

### Крупные проекты
Заказчик требует документацию:
- Руководство пользователя.
- Руководство администратора.
- Руководство разработчика.

Получает в виде объемных документов. Эти документы и пишутся сразу в редакторе типа Word.
Документы получаются оторванными от реальности. Быстро устаревают.
Обмен знаниями только через общение или чтение устаревшей документации.
Привлечение нового разработчика в проект очень дорого.

### Хотелки
Сократить время равертывания релиза.
Снизить стоимость привлечения нового разработчика в проект.
Наладить обмен знаниями.
Поддерживать документацию в актуальном состоянии.
Снизить обязательный объем документации к изучению.

## Изменения

### Причина изменений
Начали работать над огромный для нас проектом. Вести его разработку стандартными способами было нельзя. А действие закона Конвея не давало сделать качественный проект по-новому.
Огромная сила воли помогла преодолеть все невзгоды и мы сделали работающий микросервисный продукт не изменяя компанию. Однако до нормального продукта ему было далеко и поэтому пришлось перенести команду этого продукта в отдельный офис. И уже там происходила трансформация команды и доработка продукта до приемлемого уровня качества.

К продуктовому окружению команду разработки не подпускали. Нужна документация по первоначальному развертыванию проекта и по выкатке доработок.

### Разработка документации
Разработка документации велась по этому проекту началась еще до начала разработки.
Первоначально появилось верхнеуровневое описание архитектуры. Были описаны протоколы взаимодействия между микросервисами.
Развертывание проекта описано подробно. Но описать все возможные случаи практически невозможно. Развертывание каждого нового релиза длилось очень долго. Всегда возникала какая-то новая проблема.

### Привлечение новых разработчиков
Проект рос и приходилось привлекать новых разработчиков.
Обмен знаниями был все еще из уст в уста.
Развертывание проекта долгое, с кучей проблем.

## Решение

### Развертывание проекта для разработчиков
Необходимо снизить объем документации, которую должен изучить разработчик для развертывания проекта у себя. Причем она должна оставаться актуальной.
Документация перемещается в код.

#### Dockerfile, docker-compose
Все необходимое окружение описано в Dockerfile и docker-compose.
Развертывание проекта становится более простой задачей, но все таки нужно сделать несколько предварительных шагов.

#### Makefile
Снижает количество предварительных шагов до минимума.

### Развертывание проекта для эксплуатации
Появляется build машина, на которой происходит сборка образов и пуш их в приватный docker registry.
Проект разворачивается из готовых образов.

Следующий шаг это автоматизация билдов и развертывания с помощью pipeline Gitlab CI/CD.

## Результат
Разработчик может развернуть проект достаточно быстро. Объем изучаемой документации сведен к минимуму.
Эксплуатант накатывает новые версии. Ошибок не возникает. Объем изучаемой документации сведен к минимуму.

При этом документация просто перекочевала в код. Пишет такого рода документацию разработчик. Она поддерживается в актуальном состоянии.
Если другой разработчик заинтересован в получении новых знаний, то он лезет в код. А разбираться с кодом ему гораздо приятнее, чем читать документацию.
